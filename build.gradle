// Mod info
ext.mod_ver = '0.0.1'
ext.mc_ver = '1.7.10'
ext.forge_ver = '10.13.2.1307-1.7.10'


buildscript {
    repositories {
        mavenCentral()
        maven {
            name = "forge"
            url = "http://files.minecraftforge.net/maven"
        }
        maven {
            name = "sonatype"
            url = "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath 'net.minecraftforge.gradle:ForgeGradle:1.2-SNAPSHOT'
    }
}

repositories {
	maven {
		name = "chickenbones"
		url = "http://chickenbones.net/maven/"
	}
}

apply plugin: 'forge'

version = mc_ver + "-" + mod_ver
group= "net.shadowfacts.enfusion" // http://maven.apache.org/guides/mini/guide-naming-conventions.html
archivesBaseName = "EnFusion"


if (System.getenv().DRONE_BUILD_NUMBER != null) {
	version += "-snapshot-" + System.getenv().DRONE_BUILD_NUMBER
}

minecraft {
    version = mc_ver + "-" + forge_ver
    runDir = "eclipse"

    replaceIn "enfusion/EnFusion.java"
    replace '@VERSION@', mod_ver
}

dependencies {
    compile project(":ShadowCore")

    compile files(
    	'libs/Ex-Nihilo-1.37.jar',
    	'libs/neiaddons-mc1710-1.12.3.11.jar',
    	'libs/NEIIntegration-MC1.7.10-1.0.0.jar'
    )

    compile "codechicken:CodeChickenLib:1.7.10-1.1.3.127:dev"
    compile "codechicken:CodeChickenCore:1.7.10-1.0.4.35:dev"
    compile "codechicken:NotEnoughItems:1.7.10-1.0.4.83:dev"
}

processResources
{
    inputs.property "version", rootProject.mod_ver
    
    from(sourceSets.main.resources.srcDirs) {
        include '**/*.info'
        expand 'version':mod_ver,'mcversion':mc_ver
    }

    from(sourceSets.main.resources.srcDirs) {
        exclude '**/*.info'
    }

}
